var u=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),r;import{AbortError as n,HttpError as t,TimeoutError as f}from"./Errors";import{HttpClient as e,HttpResponse as o}from"./HttpClient";import{LogLevel as i}from"./ILogger";r=function(r){function e(n){var t=r.call(this)||this;return t.logger=n,t}return u(e,r),e.prototype.send=function(r){var u=this;return r.abortSignal&&r.abortSignal.aborted?Promise.reject(new n):r.method?r.url?new Promise(function(e,s){var h=new XMLHttpRequest,c;h.open(r.method,r.url,!0);h.withCredentials=r.withCredentials===undefined?!0:r.withCredentials;h.setRequestHeader("X-Requested-With","XMLHttpRequest");h.setRequestHeader("Content-Type","text/plain;charset=UTF-8");c=r.headers;c&&Object.keys(c).forEach(function(n){h.setRequestHeader(n,c[n])});r.responseType&&(h.responseType=r.responseType);r.abortSignal&&(r.abortSignal.onabort=function(){h.abort();s(new n)});r.timeout&&(h.timeout=r.timeout);h.onload=function(){r.abortSignal&&(r.abortSignal.onabort=null);h.status>=200&&h.status<300?e(new o(h.status,h.statusText,h.response||h.responseText)):s(new t(h.statusText,h.status))};h.onerror=function(){u.logger.log(i.Warning,"Error from HTTP request. "+h.status+": "+h.statusText+".");s(new t(h.statusText,h.status))};h.ontimeout=function(){u.logger.log(i.Warning,"Timeout from HTTP request.");s(new f)};h.send(r.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},e}(e);export{r as XhrHttpClient};