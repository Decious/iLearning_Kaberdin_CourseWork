"use strict";function parseLogLevel(n){var t=LogLevelNameMapping[n.toLowerCase()];if(typeof t!="undefined")return t;throw new Error("Unknown log level: "+n);}function isLogger(n){return n.log!==undefined}var __assign=this&&this.__assign||Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},HubConnectionBuilder;Object.defineProperty(exports,"__esModule",{value:!0});var DefaultReconnectPolicy_1=require("./DefaultReconnectPolicy"),HttpConnection_1=require("./HttpConnection"),HubConnection_1=require("./HubConnection"),ILogger_1=require("./ILogger"),JsonHubProtocol_1=require("./JsonHubProtocol"),Loggers_1=require("./Loggers"),Utils_1=require("./Utils"),LogLevelNameMapping={trace:ILogger_1.LogLevel.Trace,debug:ILogger_1.LogLevel.Debug,info:ILogger_1.LogLevel.Information,information:ILogger_1.LogLevel.Information,warn:ILogger_1.LogLevel.Warning,warning:ILogger_1.LogLevel.Warning,error:ILogger_1.LogLevel.Error,critical:ILogger_1.LogLevel.Critical,none:ILogger_1.LogLevel.None};HubConnectionBuilder=function(){function n(){}return n.prototype.configureLogging=function(n){if(Utils_1.Arg.isRequired(n,"logging"),isLogger(n))this.logger=n;else if(typeof n=="string"){var t=parseLogLevel(n);this.logger=new Utils_1.ConsoleLogger(t)}else this.logger=new Utils_1.ConsoleLogger(n);return this},n.prototype.withUrl=function(n,t){return Utils_1.Arg.isRequired(n,"url"),Utils_1.Arg.isNotEmpty(n,"url"),this.url=n,this.httpConnectionOptions=typeof t=="object"?__assign({},this.httpConnectionOptions,t):__assign({},this.httpConnectionOptions,{transport:t}),this},n.prototype.withHubProtocol=function(n){return Utils_1.Arg.isRequired(n,"protocol"),this.protocol=n,this},n.prototype.withAutomaticReconnect=function(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return this.reconnectPolicy=n?Array.isArray(n)?new DefaultReconnectPolicy_1.DefaultReconnectPolicy(n):n:new DefaultReconnectPolicy_1.DefaultReconnectPolicy,this},n.prototype.build=function(){var n=this.httpConnectionOptions||{},t;if(n.logger===undefined&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");return t=new HttpConnection_1.HttpConnection(this.url,n),HubConnection_1.HubConnection.create(t,this.logger||Loggers_1.NullLogger.instance,this.protocol||new JsonHubProtocol_1.JsonHubProtocol,this.reconnectPolicy)},n}();exports.HubConnectionBuilder=HubConnectionBuilder;