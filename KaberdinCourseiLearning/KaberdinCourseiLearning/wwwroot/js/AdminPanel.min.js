function roleChanged(n){let t=$(n).attr("id"),i=$(n).val();sendRequest("Rolechange",{id:t,newRole:i})}function prepareAction(n){checkboxes=$("input[name = 'Selected']:checked");let t=[];return checkboxes.each(function(n,i){t.push($(i).val())}),sendRequest(n,{ids:t}),!1}function updateRow(n,t){t=="Delete"&&n.remove();t=="Block"&&n.children("td").last().html(locale.Banned);t=="Unblock"&&n.children("td").last().html(locale.Active)}function revertRoleChange(n){let t=n.children();t.each(function(t,i){$(i).html()!=n.val()&&n.val($(i).html())})}function toggleClick(){return checkboxes=$("[name='Selected']"),checkboxes.each(function(){$(this).attr("checked",toggle)}),toggle=!toggle,!1}function sendRequest(n,t){$.ajax({type:"POST",url:"/AdminPanel?handler="+n,headers:{RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},data:t,success:function(i){i.successful?checkboxes.each(function(t,i){updateRow($(i).closest("tr"),n)}):n=="Rolechange"&&revertRoleChange($("#"+t.id))}})}var names=["Name","Email","Role","Status"],checkboxes=$("input[name = 'Selected']:checked"),options={valueNames:names},usersList=new List("users",options),toggle=!0,alert=$("#AlertMessage");