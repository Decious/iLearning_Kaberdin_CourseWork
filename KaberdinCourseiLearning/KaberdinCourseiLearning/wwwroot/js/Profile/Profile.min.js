function isPermitted(){return $("#AvatarChange").length>0}function init(){prepareAvatar();prepareDescription();prepareDropzone()}function prepareAvatar(){prepareMouseEvents($("#ProfilePicture"),$("#AvatarChange"))}function prepareMouseEvents(n,t){n.mouseenter(function(){t.show(.5)});n.mouseleave(function(){t.hide(.5)})}function prepareDescription(){prepareMouseEvents(invoker,buttonEdit);prepareDescOnEdit();prepareEditAccept()}function prepareDescOnEdit(){buttonEdit.on("click",function(){setDescAsTextArea();unBindMouseEvents(invoker);buttonAccept.show();buttonEdit.hide()})}function setDescAsTextArea(){let t=description.children("p").text();description.html("<textarea style='width: 100%; height: 100%; background: transparent;border: none;' >"+t+"<\/textarea>");var n=description.children("textarea");n.focus();n.on("keypress",function(n){n.which==13&&acceptDescription()})}function unBindMouseEvents(n){n.unbind("mouseenter");n.unbind("mouseleave")}function prepareEditAccept(){buttonAccept.on("click",function(){acceptDescription()})}function acceptDescription(){let n=description.children("textarea").val();sendDescToServer(n);setDescText(n);prepareMouseEvents(invoker,buttonEdit);buttonAccept.hide()}function sendDescToServer(n){$.ajax({type:"POST",url:"/User/Profile?handler=AcceptDescription",headers:{RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},data:{newText:n,name:$("#UserName").text()}})}function setDescText(n){description.html("<p class='text-break text-wrap text-truncate' >"+n+"<\/p>")}function prepareDropzone(){Dropzone.options.AvatarDropzone={maxFilesize:4,maxFiles:1,acceptedFiles:"image/*",resizeWidth:205,resizeHeight:205,init:function(){this.on("success",function(){setTimeout(location.reload(),2e3)});this.on("sending",function(n,t,i){i.append("name",$("#UserName").text())})}}}if(isPermitted()){var buttonEdit=$("#DescChange"),buttonAccept=$("#DescAccept"),description=$("#DescriptionContent"),invoker=$("#ProfileDescription");init()}