@model KaberdinCourseiLearning.Pages.Partials.Models.ItemModel;

@{
    var item = Model.Item;
}
<style>
    .PartialItem{
        background-image: url(@item.Collection.BackgroundUrl);
        background-size:cover;
        background-repeat:no-repeat;
    }
</style>
<div class="PartialItem container position-relative d-flex flex-column" name="Item" id="@item.ProductID">
    <div class="row Blk-Trslcnt-Bg" name="ItemAuthor">
        <div class="col" name="ItemCollectionName" style="max-height:2rem;">
            <a name="Collection" asp-area="Collection" asp-page="/Index" asp-route-id="@item.CollectionID" class="text-break font-weight-bold text-light text-left">@item.Collection.Name</a>
        </div>
    </div>
    <div class="row Blk-Trslcnt-Bg" name="HeaderData">
        <div class="col-6">
            <p name="ItemName" class="font-weight-bold text-light">@item.Name</p>
        </div>
        <div class="col-6">
            <p name="ItemTags" class="font-weight-bold text-light text-right">
            @foreach(var tag in item.Tags)
            {
                <span class="badge badge-dark badge-pill">@tag.Tag.TagValue</span>
            }
            </p>
        </div>
    </div>
    <div class="row flex-grow-1 Blk-Trslcnt-Bg overflow-hidden text-light text-break" name="FieldsDiv">
        <div class="col container" style="display:none" id="Fields">
                @foreach (var ColumnValue in item.ColumnValues)
                {
                    var name = ColumnValue.Column.ColumnName;
                    var value = ColumnValue.Value;
                    <div class="row"> 
                        <div class="col-md-2"><span class="badge badge-dark">@name</span></div>
                        @{ 
                            var html = Html.Raw("<strong>"+value+"</strong>");
                            switch (value)
                            {
                                case "true":
                                    html = Html.Raw("<i class='fa fa-check'></i>");
                                    break;
                                case "false":
                                    html = Html.Raw("<i class='fa fa-times'></i>");
                                    break;
                                default:
                                    break;
                            }
                            <div class="col-md-10">@html</div>
                        }
                    </div>
                }
        </div>
    </div>
    <div class="row Blk-Trslcnt-Bg" name="CollectionControls">
        <button class="btn btn-light position-absolute" name="ShowDetail" onclick="onToggleDetail(this)"><i class="fa fa-arrow-down"></i></button>
        @if (Model.PermittedToChange)
        {
            <div class="position-absolute" name="buttonGroup">
                <button class="btn btn-light" id="DeleteBtn"><i class="fa fa-trash"></i></button>
                <a class="btn btn-light" id="EditBtn" asp-area="Item" asp-page="Create" asp-route-productID="@item.ProductID"><i class="fa fa-edit"></i></a>
            </div>
        }
    </div>
</div>